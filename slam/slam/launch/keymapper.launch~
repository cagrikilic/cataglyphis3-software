<!-- 
FP: 30 Jan. 2013

Files tuned for ethzasl_icp_mapping commit 52d78c96c2cf2f58a400c649c561dbfec95e41a4
and for libpointmatcher commit e048c4d1180b1de005af072bf137ea4d8cf2b826
-->

<launch>
	<node name="keymapper" type="keymapper" pkg="navigation" output="screen" >
		<remap from="current_scan" to="current_scan" />
		<param name="icpConfig" value="$(find navigation)/launch/icp.yaml" />
		<param name="inputFiltersConfig" value="$(find navigation)/launch/input_filters.yaml" />
		
		
		
		<param name="useROSLogger" value="true" />
		<param name="minOverlap" value="0.5" /> 
		<param name="minReadingPointCount" value="1" /> 
		<param name="minMapPointCount" value="1" /> <!-- quick fix to have map published each time -->
		<param name="tfRefreshPeriod" value="0"/>
	</node>
	
	<node pkg="octomap_server" type="octomap_server_node" name="octomap_server">
		<param name="resolution" value="0.05" />
		
		<!-- fixed map frame (set to 'map' if SLAM or localization running!) -->
		<param name="frame_id" type="string" value="map" />
		
		<!-- maximum range to integrate (speedup!) -->
		<param name="sensor_model/max_range" value="5.0" />
		
		<!-- data source to integrate (PointCloud2) -->
		<remap from="cloud_in" to="/map_point" />
	
	</node>

	<node name="keyframe" type="keyframe" pkg="navigation" output="screen" >
		<remap from="cloud_pcd" to="cloud_pcd" />
		<param name="icpConfig" value="$(find navigation)/launch/icp.yaml" />
		<param name="inputFiltersConfig" value="$(find navigation)/launch/input_filters.yaml" />
		
		
		
		<param name="useROSLogger" value="true" />
		<param name="minOverlap" value="0.5" /> 
		<param name="minReadingPointCount" value="1" /> 
		<param name="minMapPointCount" value="1" /> <!-- quick fix to have map published each time -->
		<param name="tfRefreshPeriod" value="0"/>
	</node>
	
</launch>
